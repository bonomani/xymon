Reference Docs Naming Convention
=============================

This folder groups the reference migration documents in a predictable order so
both humans and tooling can find the right reference quickly.

Start here: `00-INDEX.md`.

Naming Scheme
-------------
- 00-INDEX.md: entry point and routing
- 10-PLAN.md: acceptance criteria and checklist
- 20-RUNBOOK.md: step-by-step validation procedure
- 30-REFERENCE.md: canonical reference install contract
- 40-STATUS.md: current status snapshot
- STATUS-HISTORY.md: detailed run history and notes
- refs/make_<os>/<variant>/ref: versioned reference list used by CI
- refs/make_<os>/<variant>/inventory.tsv: canonical inventory used to derive ref/perms/symlinks
- refs/make_<os>/<variant>/keyfiles.sha256: corresponding keyfile checksums
- refs/make_<os>/<variant>/meta/config.h: captured legacy config header
- refs/make_<os>/<variant>/meta/config.defines: normalized config macro list

During CI runs, refs are staged under `/tmp/xymon-refs/<build>.<os>.<variant>/` before sync.

Guidelines
----------
- Keep one source of truth per topic.
- Update `40-STATUS.md` after any significant change or validation run.
- Append run details to `STATUS-HISTORY.md` when needed.
- Track changes in `STATUS-HISTORY.md`.
- Treat all `refs/make_<os>/<variant>/*` files as read-only. Do not edit them by hand.
- References are generated by:
- `.github/workflows/ref-make-<os>.yml`
- `ci/bootstrap-install.sh`
- `ci/generate-refs.sh`
- `.github/workflows/ref-sync.yml` collects artifacts and writes them to `origin/ci/update-legacy-references`.
- Manually merge `origin/ci/update-legacy-references` into your code branch after reviewing the changes.

Generating `refs/make_linux/server/ref`
-----------------------
Use this only when legacy Makefiles change.
Follow the exact commands in `20-RUNBOOK.md`.

BSD references follow the same procedure, replacing the output path:
- `refs/make_freebsd/server/ref`
- `refs/make_openbsd/server/ref`
- `refs/make_netbsd/server/ref`

CI workflows
------------
Legacy references are generated via the per-OS workflows:
- `.github/workflows/ref-make-linux.yml`
- `.github/workflows/ref-make-freebsd.yml`
- `.github/workflows/ref-make-openbsd.yml`
- `.github/workflows/ref-make-netbsd.yml`
