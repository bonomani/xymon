{
  "sections": [
    {
      "id": "preset_identity",
      "title": "Preset identity",
      "fields": [
        {
          "id": "name",
          "type": "string",
          "cmake_key": "name"
        },
        {
          "id": "displayName",
          "type": "string",
          "cmake_key": "displayName"
        },
        {
          "id": "generator",
          "type": "string",
          "cmake_key": "generator",
          "default": "Unix Makefiles"
        },
        {
          "id": "binaryDir",
          "type": "computed",
          "cmake_key": "binaryDir",
          "template": "build/${name}"
        }
      ]
    },
    {
      "id": "variant",
      "title": "Variant / Mode",
      "fields": [
        {
          "id": "VARIANT",
          "type": "enum",
          "cmake_key": "XYMON_VARIANT",
          "enum": [
            "server",
            "client"
          ],
          "default": "server",
          "cli": {
            "option": "--variant"
          }
        },
        {
          "id": "LOCALCLIENT",
          "type": "enum",
          "cmake_key": "LOCALCLIENT",
          "enum": [
            "local",
            "remote"
          ],
          "default": "local",
          "visible_if": {
            "VARIANT": "client"
          },
          "cli": {
            "option": "--client-mode"
          }
        }
      ]
    },
    {
      "id": "layout",
      "title": "Layout / Installation",
      "fields": [
        {
          "id": "USE_GNUINSTALLDIRS",
          "type": "bool_onoff",
          "cmake_key": "USE_GNUINSTALLDIRS",
          "default": "OFF",
          "cli": {
            "option": "--gnuinstall",
            "flag_value": "ON"
          }
        },
        {
          "id": "CMAKE_INSTALL_PREFIX",
          "type": "string",
          "cmake_key": "CMAKE_INSTALL_PREFIX",
          "default": "/usr/local",
          "cli": {
            "option": "--prefix"
          }
        }
      ]
    },
    {
      "id": "features",
      "title": "Feature flags",
      "fields": [
        {
          "id": "ENABLE_RRD",
          "type": "bool_onoff",
          "cmake_key": "ENABLE_RRD",
          "default_by_variant": {
            "server": "ON",
            "client": "OFF"
          },
          "cli": {
            "option": "--enable-rrd"
          }
        },
        {
          "id": "ENABLE_SNMP",
          "type": "bool_onoff",
          "cmake_key": "ENABLE_SNMP",
          "default_by_variant": {
            "server": "ON",
            "client": "OFF"
          },
          "cli": {
            "option": "--enable-snmp"
          }
        },
        {
          "id": "ENABLE_SSL",
          "type": "bool_onoff",
          "cmake_key": "ENABLE_SSL",
          "default_by_variant": {
            "server": "ON",
            "client": "ON"
          },
          "cli": {
            "option": "--enable-ssl"
          }
        },
        {
          "id": "ENABLE_LDAP",
          "type": "bool_onoff",
          "cmake_key": "ENABLE_LDAP",
          "default_by_variant": {
            "server": "ON",
            "client": "OFF"
          },
          "cli": {
            "option": "--enable-ldap"
          }
        }
      ]
    },
    {
      "id": "paths",
      "title": "Paths",
      "fields": [
        {
          "id": "XYMONTOPDIR",
          "type": "string",
          "cmake_key": "XYMONTOPDIR",
          "default": "/var/lib/xymon"
        },
        {
          "id": "XYMONHOME",
          "type": "string",
          "cmake_key": "XYMONHOME",
          "default_if": "XYMONTOPDIR + '/server'"
        },
        {
          "id": "XYMONCLIENTHOME",
          "type": "string",
          "cmake_key": "XYMONCLIENTHOME",
          "default_if": "XYMONTOPDIR + '/client'"
        },
        {
          "id": "XYMONVAR",
          "type": "string",
          "cmake_key": "XYMONVAR",
          "default_if": "XYMONTOPDIR + '/data'"
        },
        {
          "id": "XYMONLOGDIR",
          "type": "string",
          "cmake_key": "XYMONLOGDIR",
          "default": "/var/log/xymon"
        },
        {
          "id": "CGIDIR",
          "type": "string",
          "cmake_key": "CGIDIR",
          "default": "/var/lib/xymon/cgi-bin"
        },
        {
          "id": "SECURECGIDIR",
          "type": "string",
          "cmake_key": "SECURECGIDIR",
          "default": "/var/lib/xymon/cgi-secure"
        },
        {
          "id": "MANROOT",
          "type": "string",
          "cmake_key": "MANROOT",
          "default_if": "CMAKE_INSTALL_PREFIX + '/man'"
        }
      ]
    },
    {
      "id": "libraries",
      "title": "Library paths",
      "fields": [
        {
          "id": "RRDINCDIR",
          "type": "path_optional",
          "cmake_key": "RRDINCDIR"
        },
        {
          "id": "RRDLIBDIR",
          "type": "path_optional",
          "cmake_key": "RRDLIBDIR"
        },
        {
          "id": "PCREINCDIR",
          "type": "path_optional",
          "cmake_key": "PCREINCDIR"
        },
        {
          "id": "PCRELIBDIR",
          "type": "path_optional",
          "cmake_key": "PCRELIBDIR"
        },
        {
          "id": "SSLINCDIR",
          "type": "path_optional",
          "cmake_key": "SSLINCDIR"
        },
        {
          "id": "SSLLIBDIR",
          "type": "path_optional",
          "cmake_key": "SSLLIBDIR"
        },
        {
          "id": "LDAPINCDIR",
          "type": "path_optional",
          "cmake_key": "LDAPINCDIR"
        },
        {
          "id": "LDAPLIBDIR",
          "type": "path_optional",
          "cmake_key": "LDAPLIBDIR"
        },
        {
          "id": "CARESINCDIR",
          "type": "path_optional",
          "cmake_key": "CARESINCDIR"
        },
        {
          "id": "CARESLIBDIR",
          "type": "path_optional",
          "cmake_key": "CARESLIBDIR"
        }
      ]
    }
  ],
  "cli_globals": [
    {
      "id": "DESTDIR",
      "env": "DESTDIR",
      "cli": {
        "option": "--destdir"
      }
    },
    {
      "id": "PARALLEL",
      "env": "CMAKE_BUILD_PARALLEL_LEVEL",
      "cli": {
        "option": "--parallel"
      }
    }
  ],
  "resolution": {
    "required": [
      "USE_GNUINSTALLDIRS",
      "CMAKE_INSTALL_PREFIX",
      "XYMONTOPDIR",
      "XYMONHOME",
      "XYMONCLIENTHOME",
      "XYMONVAR",
      "XYMONLOGDIR",
      "CGIDIR",
      "SECURECGIDIR",
      "MANROOT",
      "ENABLE_RRD",
      "ENABLE_SNMP",
      "ENABLE_SSL",
      "ENABLE_LDAP"
    ],
    "ci_allowed_missing": [
      "RRDINCDIR",
      "RRDLIBDIR",
      "PCREINCDIR",
      "PCRELIBDIR",
      "SSLINCDIR",
      "SSLLIBDIR",
      "LDAPINCDIR",
      "LDAPLIBDIR",
      "CARESINCDIR",
      "CARESLIBDIR"
    ]
  }
}
